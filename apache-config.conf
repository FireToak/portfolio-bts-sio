<VirtualHost *:80>
    DocumentRoot /var/www/html

    # Alias pour servir le favicon à la racine, même s'il est rangé ailleurs
    Alias /favicon.ico /var/www/html/assets/img/favicon/favicon.ico

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted

        RewriteEngine On

        # 1. Gestion des erreurs 404
        ErrorDocument 404 /404.php

        # 2. Suppression de l'extension .php dans l'URL
        # Si le fichier demandé n'existe pas et n'est pas un dossier
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        # On essaie de voir si le fichier avec .php existe, si oui on sert celui-là
        RewriteCond %{REQUEST_FILENAME}.php -f
        RewriteRule ^([^\.]+)$ $1.php [NC,L]
    </Directory>
</VirtualHost>